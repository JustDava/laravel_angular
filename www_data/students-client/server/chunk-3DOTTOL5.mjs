import './polyfills.server.mjs';
import{B as O,E as V,G as L,H as G,I as $,J as Z,K as q,L as z,M as J,N as K,O as Q,R as W,V as X,W as Y,Z as I,_ as ee,a as M,b as R,c as v,d as C,e as E,f as u,g as S,h as k,i as o,j as d,k as r,l as n,m as c,n as _,o as x,p as F,q as h,r as s,s as l,t as j,u as g,v as A,w as B}from"./chunk-PLV2AZMS.mjs";var ae=()=>[""],oe=()=>["/student"],te=(()=>{class a{title="students-client";static \u0275fac=function(i){return new(i||a)};static \u0275cmp=v({type:a,selectors:[["app-root"]],standalone:!0,features:[g],decls:11,vars:4,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container","container-fluid"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav"],[1,"nav-item"],[1,"nav-link",3,"routerLink"]],template:function(i,t){i&1&&(r(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),s(6,"\u0421\u043F\u0438\u0441\u043E\u043A \u0443\u0447\u0435\u043D\u0438\u043A\u043E\u0432"),n()(),r(7,"li",4)(8,"a",5),s(9,"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0447\u0435\u043D\u0438\u043A\u0430"),n()()()()()(),c(10,"router-outlet")),i&2&&(u(5),o("routerLink",A(2,ae)),u(3),o("routerLink",A(3,oe)))},dependencies:[Y,I]})}return a})();var b="http://localhost:8000/api",D=(()=>{class a{http;headers;constructor(e){this.http=e,this.init()}init(){this.headers=new Z({Accept:"application/json"})}getStudent(e){return this.http.get(b+"/students/"+e,{headers:this.headers})}getStudents(){return this.http.get(b+"/students",{headers:this.headers})}addStudent(e){return this.http.post(b+"/students",e,{headers:this.headers})}updateStudent(e){return this.http.put(b+"/students",e,{headers:this.headers})}deleteStudent(e){return this.http.delete(b+"/students/"+e,{headers:this.headers})}static \u0275fac=function(i){return new(i||a)(R(q))};static \u0275prov=M({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})();var T=(()=>{class a{studentService;route;id;formTitle;isLoading=!1;student;response;constructor(e,i){this.studentService=e,this.route=i}ngOnInit(){if(this.route.params.subscribe(e=>{this.id=e.id}),this.id==null){this.formTitle="\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0443\u0447\u0435\u043D\u0438\u043A\u0430";return}this.getStudent(this.id),this.formTitle="\u041E\u0431\u043D\u043E\u0432\u0438\u0442\u044C \u0443\u0447\u0435\u043D\u0438\u043A\u0430"}getStudent(e){this.isLoading=!0,this.studentService.getStudent(e).subscribe({next:i=>{this.isLoading=!1,this.student=i.data},error:i=>{this.isLoading=!1,console.log(i),this.response={status:"error",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0443\u0447\u0435\u043D\u0438\u043A\u0430"}}})}addStudent(e,i,t,p,y){this.isLoading=!0,this.studentService.addStudent({first_name:e,last_name:i,patronymic:t,birthday:p,gender:y}).subscribe({next:m=>{this.isLoading=!1,this.student=m.data,this.response={status:"success",message:"\u0423\u0447\u0435\u043D\u0438\u043A \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D"}},error:m=>{this.isLoading=!1,console.log(m),this.response={status:"error",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0443\u0447\u0435\u043D\u0438\u043A\u0430"}}})}updateStudent(e,i,t,p,y,m){this.isLoading=!0,this.studentService.updateStudent({id:e,first_name:i,last_name:t,patronymic:p,birthday:y,gender:m}).subscribe({next:f=>{this.isLoading=!1,this.student=f.data,this.response={status:"success",message:"\u0423\u0447\u0435\u043D\u0438\u043A \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D"}},error:f=>{this.isLoading=!1,console.log(f),this.response={status:"error",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0438 \u0443\u0447\u0435\u043D\u0438\u043A\u0430"}}})}static \u0275fac=function(i){return new(i||a)(S(D),S(X))};static \u0275cmp=v({type:a,selectors:[["app-student-form"]],standalone:!0,features:[g],decls:41,vars:15,consts:[["studentFirstName",""],["studentLastName",""],["studentPatronymic",""],["studentBirthday",""],["studentGender",""],[1,"section"],[1,"container"],[1,"alert",3,"ngClass"],[1,"form-block","col-6"],[1,"form-group"],[1,"form-label"],["type","text",1,"form-control",3,"value"],["type","date",1,"form-control",3,"value"],[1,"form-select"],["value","\u043C\u0443\u0436",3,"selected"],["value","\u0436\u0435\u043D",3,"selected"],["role","status",1,"spinner-border","text-primary","mt-3"],[1,"visually-hidden"],["type","button",1,"btn","btn-primary","mt-3",3,"click"]],template:function(i,t){if(i&1){let p=_();r(0,"section",5)(1,"div",6)(2,"div",7),s(3),n(),r(4,"h4"),s(5),n(),r(6,"div",8)(7,"div",9)(8,"label",10),s(9,"\u0418\u043C\u044F"),n(),c(10,"input",11,0),n(),r(12,"div",9)(13,"label",10),s(14,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),n(),c(15,"input",11,1),n(),r(17,"div",9)(18,"label",10),s(19,"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"),n(),c(20,"input",11,2),n(),r(22,"div",9)(23,"label",10),s(24,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),n(),c(25,"input",12,3),n(),r(27,"div",9)(28,"label",10),s(29,"\u041F\u043E\u043B"),n(),r(30,"select",13,4)(32,"option",14),s(33,"\u041C\u0443\u0436\u0441\u043A\u043E\u0439"),n(),r(34,"option",15),s(35,"\u0416\u0435\u043D\u0441\u043A\u0438\u0439"),n()()()(),r(36,"div",16)(37,"span",17),s(38,"Loading..."),n()(),r(39,"button",18),x("click",function(){C(p);let m=h(11),f=h(16),P=h(21),N=h(26),U=h(31);return E(t.student==null?t.addStudent(m.value,f.value,P.value,N.value,U.value):t.updateStudent(t.student.id,m.value,f.value,P.value,N.value,U.value))}),s(40,"\u0421\u043E\u0445\u0440\u0430\u043D\u0438\u0442\u044C "),n()()()}i&2&&(u(2),d("visually-hidden",t.response==null),o("ngClass",(t.response==null?null:t.response.status)=="success"?"alert-success":"alert-danger"),u(),j("",t.response==null?null:t.response.message," "),u(2),l(t.formTitle),u(5),o("value",t.student==null?null:t.student.first_name),u(5),o("value",t.student==null?null:t.student.last_name),u(5),o("value",t.student==null?null:t.student.patronymic),u(5),o("value",t.student==null?null:t.student.birthday),u(7),o("selected",(t.student==null?null:t.student.gender)=="\u043C\u0443\u0436"),u(2),o("selected",(t.student==null?null:t.student.gender)=="\u0436\u0435\u043D"),u(2),d("visually-hidden",!t.isLoading),u(3),d("visually-hidden",t.isLoading))},dependencies:[L]})}return a})();var de=a=>[a];function le(a,H){if(a&1){let e=_();r(0,"tr")(1,"td"),s(2),n(),r(3,"td"),s(4),n(),r(5,"td"),s(6),n(),r(7,"td"),s(8),n(),r(9,"td"),s(10),n(),r(11,"td"),s(12),n(),r(13,"td")(14,"a",8),s(15,"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C"),n(),r(16,"button",9),x("click",function(){let t=C(e).$implicit,p=F(2);return E(p.deleteStudent(t.id))}),s(17,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C"),n(),r(18,"div",10)(19,"span",4),s(20,"Loading..."),n()()()()}if(a&2){let e=H.$implicit,i=F(2);u(2),l(e.id),u(2),l(e.last_name),u(2),l(e.first_name),u(2),l(e.patronymic),u(2),l(e.birthday),u(2),l(e.gender),u(2),d("visually-hidden",i.isUpdating(e.id)),o("routerLink",B(13,de,"/student/"+e.id)),u(2),d("visually-hidden",i.isUpdating(e.id)),u(2),d("visually-hidden",!i.isUpdating(e.id))}}function pe(a,H){if(a&1&&(r(0,"table",6)(1,"thead")(2,"tr")(3,"th"),s(4,"ID"),n(),r(5,"th"),s(6,"\u0424\u0430\u043C\u0438\u043B\u0438\u044F"),n(),r(7,"th"),s(8,"\u0418\u043C\u044F"),n(),r(9,"th"),s(10,"\u041E\u0442\u0447\u0435\u0441\u0442\u0432\u043E"),n(),r(11,"th"),s(12,"\u0414\u0430\u0442\u0430 \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F"),n(),r(13,"th"),s(14,"\u041F\u043E\u043B"),n(),r(15,"th"),s(16,"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044F"),n()()(),r(17,"tbody"),k(18,le,21,15,"tr",7),n()()),a&2){let e=F();u(18),o("ngForOf",e.students)}}var ie=(()=>{class a{studentService;students=[];isLoading=!1;response;constructor(e){this.studentService=e}ngOnInit(){this.getStudents()}findStudent(e){return this.students.find(i=>i.id===e)}isUpdating(e){return this.findStudent(e).isUpdating}getStudents(){this.isLoading=!0,this.studentService.getStudents().subscribe({next:e=>{this.isLoading=!1,this.students=e.data},error:e=>{this.isLoading=!1,console.log(e),this.response={status:"error",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u0435 \u0441\u043F\u0438\u0441\u043A\u0430 \u0443\u0447\u0435\u043D\u0438\u043A\u043E\u0432"}}})}deleteStudent(e){let i=this.findStudent(e);i.isUpdating=!0,this.studentService.deleteStudent(e).subscribe({next:()=>{i.isUpdating=!1;let t=this.students.findIndex(p=>p.id===e);this.students.splice(t,1)},error:t=>{i.isUpdating=!1,console.log(t),this.response={status:"error",message:"\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0443\u0434\u0430\u043B\u0435\u043D\u0438\u0438 \u0443\u0447\u0435\u043D\u0438\u043A\u0430"}}})}static \u0275fac=function(i){return new(i||a)(S(D))};static \u0275cmp=v({type:a,selectors:[["app-home"]],standalone:!0,features:[g],decls:8,vars:7,consts:[[1,"section"],[1,"container"],[1,"alert",3,"ngClass"],["role","status",1,"spinner-border","text-secondary-emphasis"],[1,"visually-hidden"],["class","table",4,"ngIf"],[1,"table"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-danger",3,"click"],["role","status",1,"spinner-border","text-danger"]],template:function(i,t){i&1&&(r(0,"section",0)(1,"div",1)(2,"div",2),s(3),n(),r(4,"div",3)(5,"span",4),s(6,"Loading..."),n()(),k(7,pe,19,1,"table",5),n()()),i&2&&(u(2),d("visually-hidden",t.response==null),o("ngClass",(t.response==null?null:t.response.status)=="success"?"alert-success":"alert-danger"),u(),l(t.response==null?null:t.response.message),u(),d("visually-hidden",!t.isLoading),u(3),o("ngIf",!t.isLoading))},dependencies:[G,$,L,I]})}return a})();var re=[{path:"",component:ie,pathMatch:"full"},{path:"student",component:T},{path:"student/:id",component:T},{path:"**",redirectTo:"",pathMatch:"full"}];var se={providers:[O({eventCoalescing:!0}),ee(re),Q(),z(J())]};var me={providers:[W()]},ue=V(se,me);var ce=()=>K(te,ue),Ge=ce;export{Ge as a};
